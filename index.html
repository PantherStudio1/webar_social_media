<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
       
        <!-- Initialize the viewport -->
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
       
        <!-- Load the required dependencies: A-frame and AR.js -->
        <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
        <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/master/aframe/build/aframe-ar.min.js"></script>
       
        <!-- This is a hack because at the time of writing there are some distortions in the provided visuals until the  -->
        <!-- system receives a resize event. The resize event must be triggered when everything has been loaded and the  -->
        <!-- camera has been initialized. All the events I tried didn't work, so in the end I resorted using a 3 seconds -->
        <!-- time-out after the load event. When this problem will be fixed in the AR.js library, this hack won't be necessary -->
        <!-- anymore -->
        <script>
        window.onload = function(){    
            setTimeout(function(){
                var resizeEvent = window.document.createEvent('UIEvents');
                resizeEvent.initUIEvent('resize', true, false, window, 0);
                window.dispatchEvent(resizeEvent);
            }, 3000);
        }; 
        </script>  
    </head>
     
    <body style='margin : 0px; overflow: hidden;'>
        <!-- a-scene defines the scene that we are agoing to use. After arjs= there are various options that can be customized  -->
        <!-- depending on your needs. For now just stick with these ones -->
        <a-scene cursor="fuse: false; rayOrigin: mouse;" embedded arjs='sourceType: webcam; debugUIEnabled: false;'>
             <!-- Following are social media pngs -->
            <a-assets>
                <img id="facebook" src="images/facebook.png">
                <img id="instagram" src="images/instagram.png">
                <img id="twitter" src="images/twitter.png">
                <img id="youtube" src="images/youtube.png">
                <img id="android" src="images/android.png">
                <img id="apple" src="images/apple.png">
                
            </a-assets>
             <!-- Defines the marker that we are going to use. Notice that we are not providing the image file, but the  -->
             <!-- "compiled" .patt file that we got from the online tool. the marker MUST BE ACCESSIBLE VIA HTTPS -->
             <a-marker id="marker" preset='custom' type='pattern' url='https://pantherstudio1.github.io/webar_social_media/marker/pattern-marker.patt'>
             
                <!-- Here we define the content to show on the marker when it gets detected: a unit cube that lies on the floor and that is red -->
                <!--<a-box id="box" position='0 0.5 0' color="red"  facebook-component></a-box> -->
                <a-image src="#facebook" position="-1.25 0.01 0" scale="0.4 0.4 0.4" rotation="-90 0 0" id="facebookBtn" look-at="#cam"  facebook-component></a-image>
                <a-image src="#instagram" position="-0.75 0.01 0" scale="0.4 0.4 0.4" rotation="-90 0 0" id="instagramBtn" look-at="#cam" instagramBtn></a-image>
                <a-image src="#twitter" position="-0.25 0.01 0" scale="0.4 0.4 0.4" rotation="-90 0 0" id="twitterBtn" look-at="#cam" twitterBtn></a-image>
                <a-image src="#youtube" position="0.25 0.01 0" scale="0.4 0.4 0.4" rotation="-90 0 0" id="youtubeBtn" look-at="#cam" youtubeBtn></a-image>
                <a-image src="#android" position="0.75 0.01 0" scale="0.4 0.4 0.4" rotation="-90 0 0" id="androidBtn" look-at="#cam" androidBtn></a-image>
                <a-image src="#apple" position="1.25 0.01 0" scale="0.4 0.4 0.4" rotation="-90 0 0" id="appleBtn" look-at="#cam" appleBtn></a-image>
             </a-marker>
             
             <!-- Define the camera of the scene -->
             <a-entity camera></a-entity>
        </a-scene>
        
        <script>
            
            /*AFRAME.registerComponent('facebook-component', {

            init: function() {
                const animatedMarker = document.querySelector("#marker");
                const aEntity = document.querySelector("#facebookBtn");

                // every click, we make our model grow in size :)
                animatedMarker.addEventListener('click', function(ev, target){
                    console.log("Box is clicked...");
                    const intersectedElement = ev && ev.detail && ev.detail.intersectedEl;
                    if (aEntity && intersectedElement === aEntity) {
                        alert('Facebook Clicked!');
                        window.open("https://www.facebook.com/", "_blank");
                    }
                });
            }});
            

            AFRAME.registerComponent('facebookBtn', {
                init: function() {
                    this.el.addEventListener('click', () => {
                        alert('Instagram Clicked!')
                        window.open("https://www.facebook.com/", "_blank");
                    });
            }});
            
            AFRAME.registerComponent('instagramBtn', {
                init: function() {
                    this.el.addEventListener('click', () => {
                        alert('Instagram Clicked!')
                        window.open("https://www.instagram.com/", "_blank");
                    });
            }});

            AFRAME.registerComponent('twitterBtn', {
                init: function() {
                    this.el.addEventListener('click', () => {
                        alert('Twitter Clicked!')
                        window.open("https://www.twitter.com/", "_blank");
                    });
            }});

            AFRAME.registerComponent('youtubeBtn', {
                init: function() {
                    this.el.addEventListener('click', () => {
                        alert('Twitter Clicked!')
                        window.open("https://www.youtube.com/", "_blank");
                    });
            }});

            AFRAME.registerComponent('androidBtn', {
                init: function() {
                    this.el.addEventListener('click', () => {
                        alert('Twitter Clicked!')
                        window.open("https://play.google.com/store", "_blank");
                    });
            }});

            AFRAME.registerComponent('appleBtn', {
                init: function() {
                    this.el.addEventListener('click', () => {
                        alert('Twitter Clicked!')
                        window.open("https://www.apple.com/in/app-store/.com/", "_blank");
                    });
            }});*/

        </script>
        
        <script>
            document.getElementById("facebookBtn").addEventListener("click", function() {
                window.open("https://www.facebook.com/", "_blank");
            });

            document.getElementById("instagramBtn").addEventListener("click", function() {
                window.open("https://www.instagram.com/", "_blank");
            });

            document.getElementById("twitterBtn").addEventListener("click", function() {
                window.open("https://www.twitter.com/", "_blank");
            });

            document.getElementById("youtubeBtn").addEventListener("click", function() {
                window.open("https://www.youtube.com/", "_blank");
            });

            document.getElementById("androidBtn").addEventListener("click", function() {
                window.open("https://play.google.com/store", "_blank");
            });

            document.getElementById("appleBtn").addEventListener("click", function() {
                window.open("https://www.apple.com/in/app-store/.com/", "_blank");
            });

        </script>
    </body>
</html>
